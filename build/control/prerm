#!/bin/sh

# backup all files needed to restore functionality after upgrade
mkdir -p /tmp/archivczsk

if [ -f /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/categories.xml ]; then
	echo "saving categories.xml to /tmp/archivczsk ..."
	cp /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/categories.xml /tmp/archivczsk/
fi

if [ -d /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/gui/skins/ ]; then
	echo "saving SKINS to /tmp/archivczsk ..."
	cp -R /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/gui/skins/ /tmp/archivczsk/
	
	# don't backup default skins
	rm /tmp/archivczsk/skins/default_*.xml
fi

if [ -d /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/resources/data/ ]; then
	echo "saving DATA to /tmp/archivczsk ..."
	cp -R /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/resources/data/ /tmp/archivczsk/
fi

if [ -d /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/resources/repositories/addons/ ]; then
	echo "saving ADDONS to /tmp/archivczsk ..."
	cp -R /usr/lib/enigma2/python/Plugins/Extensions/archivCZSK/resources/repositories/addons/ /tmp/archivczsk/
fi

exit 0
